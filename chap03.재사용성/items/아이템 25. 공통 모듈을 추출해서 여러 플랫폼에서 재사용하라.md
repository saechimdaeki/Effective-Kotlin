# 아이템 25. 공통 모듈을 추출해서 여러 플랫폼에서 재사용하라

기업이 한 플랫폼만을 대상으로 애플리케이션을 만드는 경우는 없다. 기업은 일반적으로 둘 이상의 플랫폼을 대상으로 하는 제품을 만들기 원하며, 요즘 대부분 기업의

제품과 서비스는 여러 플랫폼에서 돌아가고 있다. 네트워크 호출을 통해 통신하는 클라이언트와 서버 애플리케이션을 생각해보자. 두 애플리케이션은 서로 소통하므로, 재사용할 수 있는 부분이

많을 것이다. 다른 플랫폼에 동일한 제품을 구현한다면, 재사용할 수 있는 부분이 더 많을 것이다. 특히 비즈니스 로직 부분들은 거의 동일하다.

따라서 소스 코드를 공유할 수 있다면, 큰 이득이 발생할 것이다.

## 풀스택 개발

일반적으로 백엔드와 웹은 분리해서 개발한다. 하지만 상황은 변할 수 있다. 코틀린은 백엔드 개발을 위한 자바의 인기 있는 대안이 되고 있다.

예를 들어 코틀린은 자바에서 갖아 많이 활용되는 스프링 등의 프레임워크들을 사용할 수 있고 코틀린 백엔드 프레임워크인 Ktor도 점점 많이 사용되고 있다.

코틀린의 굉장한 점 중 하나는 코틀린이 자바스크립트로 컴파일될 수 있다는 것이다. 이미 많은 코틀린/JS 라이브러리가 있으며, 코틀린을 활용해 다양한

웹 애플리케이션을 만들 수 있다. 즉, 웹 백엔드와 프론트엔드를 모두 코틀린으로 만들 수 있다는 것이다. 이는 단순하게 만들 수 있다는 개념을 떠나서,

서로 코드를 공유할 수도 있다는 의미이다. 따라서 공통 코드, API 엔드포인트 정의, 추상화 등을 재사용할 수 있다.

## 모바일 개발

이러한 기능은 모바일 세계에서 훨씬 더 유용하다. 안드로이드 전용으로만 애플리케이션을 만드는 경우는 거의 없다.

일반적으로 안드로이드 애플리케이션과 ios애플리케이션은 거의 대부분 동일한 동작을 하고, 내부적으로 비슷한 로직을 사용하지만, 다른 언어와

도구를 사용해서 따로 개발해야 한다. 코틀린의 멀티 플랫폼 기능을 활용하면, 로직을 한 번만 구현하고, 두 플랫폼에서 이를 재사용할 수 있다.

공통 모듈을 만들고, 여기에 다양한 비즈니스 로직을 구현하면 된다. 이때 비즈니스 로직은 프레임워크와 플랫폼에 종속되지 않고, 독립적이어야 한다.

이러한 공통 로직은 처음부터 코틀린으로 직접 만들거나, 다른 공통 모듈을 활용해서 만들 수 있다. 만들기만 하면 여러 플랫폼에서 사용할 수 있다.

안드로이드의 경우, 그레이들(Gradle)을 사용해서 동일한 방법으로 만들어지므로, 직접 사용할 수 있다. 따라서 굉장히 쉽게 공통 모듈을 활용할 수 있다.

ios의 경우 LLVM을 사용하여 네이티브 코드로 컴파일 할 수 있는 코틀린/네이티브를 사용하면, Objective-C 프레임워크로 변할 수 있다.

이렇게 변환하면 XCode 또는 AppCode에서 스위프트로 활용할 수 있다. 참고로, 코틀린/네이티브를 사용해 전체 애플리케이션을 만들어 버리는 방법도 있다.

## 라이브러리

공통 모듈을 정의할 수 있다는 것은 라이브러리에 있어서 강력한 도구이다. 특히 플랫폼에 크게 의존하지 않는다는 점은 공통 모듈을 JVM, 자바스크립트, 네이티브 환경에서

작동하는 모든 언어에서 활용할 수 있다는 의미이다. 

## 함께 사용하기

코틀린을 사용하면 널리 사용되는 대부분의 장치와 플랫폼을 대상으로 개발할 수 있으며, 원하는 코드들을 재사용할 수 있다. 코틀린으로 작성할 수 있는 것들의 예를 간단하게 보자

- 코틀린/JVM을 사용한 백엔드 개발 - 스프링, Ktor 등
- 코틀린/JS를 사용한 웹사이트 개발 - 리액트 등
- 코틀린/JVM을 사용한 안드로이드 개발 - 안드로이드 SDK 등
- 코틀린/네이티브를 통해 Objective-C/스위프트로 ios 프레임워크 개발
- 코틀린/JVM을 사용한 데스크톱 개발 - TornadoFx 등
- 코틀린/네이티브를 사용한 라즈베리 파이, 리눅스, macOS 프로그램 개발

수많은 개발자가 코드를 안전하고 효율적으로 재사용할 수 있게 하는 코드 구성 방법을 계속 고안하고 있다. 지금까지 설명한 접근 방법도 이러한 코드 구성 방법의 예이다.

공통 모듈을 사용하면 여러 플랫폼에서 코드를 재사용할 수 있다. 따라서 이러한 접근 방법은 코드를 한 번만 작성해서 공통 논리 또는 공통 알고리즘을

재사용할 수 있게 해주는 강력한 도구라고 할 수 있다.